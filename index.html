<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>ButteMAP - My Academic Plan</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="app.css" rel="stylesheet" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">üó∫Ô∏è</div>
      <div>
        <h1>ButteMAP</h1>
        <p class="sub">My Academic Plan ‚Ä¢ Plan terms, track progress, find programs</p>
      </div>
    </div>
    <div class="actions">
      <button id="btn-export" class="ghost">Export Plan</button>
      <label class="ghost file">
        Import Plan
        <input type="file" id="file-import" accept="application/json" />
      </label>
      <button id="btn-clear" class="ghost" title="Clear all terms, exams, and waivers">Clear Plan</button>
    </div>
  </header>

  <main class="wrap">
    <section class="panel disclaimer">
      <details>
        <summary><strong>Disclaimer:</strong> This tool does NOT replace a counselor.</summary>
        <p>
          ButteMAP is an unofficial planning aid. <strong>Always verify your academic plan with a Butte College counselor</strong> before making enrollment decisions.
        </p>
        <p>
          <strong>This tool is naturally susceptible to errors:</strong>
        </p>
        <ul>
          <li>Course data is scraped from Ellucian and may be outdated if the catalog changes.</li>
          <li>GE patterns are manually authored from official documents ‚Äî transcription errors are possible.</li>
          <li>Exam credit mappings are parsed from HTML tables that may not reflect current policy.</li>
          <li>Program requirements are fetched via API and may not match real-time DegreeWorks updates.</li>
          <li>Prerequisite parsing uses heuristics that can misinterpret complex requirement text.</li>
        </ul>
        <p>
          <strong>Found an issue?</strong> Report it on <a href="https://github.com/ShortTimeNoSee/ButteMAP/issues" target="_blank">GitHub Issues</a> or email <a href="mailto:nikolaythompson@gmail.com">nikolaythompson@gmail.com</a>.
        </p>
      </details>
    </section>

    <section class="panel">
      <h2>1) Data status</h2>
      <div id="data-status" class="grid grid-3"></div>
    </section>

    <section class="panel">
      <h2>2) Terms & Courses</h2>
      <div id="terms"></div>
      <div class="term-controls">
        <select id="term-season">
          <option>Winter</option>
          <option>Spring</option>
          <option>Summer</option>
          <option>Fall</option>
        </select>
        <input id="term-year" type="number" min="2018" max="2030" value="2025" />
        <button id="add-term" class="primary">Add Term</button>
      </div>
      <div class="summary">
        <div><strong>GPA (completed):</strong> <span id="gpa">‚Äî</span></div>
        <div><strong>Total Completed Units:</strong> <span id="units-completed">0</span></div>
        <div><strong>In-Progress Units:</strong> <span id="units-ip">0</span></div>
        <div><strong>Planned Units:</strong> <span id="units-pl">0</span></div>
      </div>
    </section>

    <section class="panel">
      <h2>2b) Credit & Waivers</h2>

      <h3 class="section-sub">Exams (AP / IB / CLEP)</h3>
      <div class="exam-controls">
        <select id="exam-program">
          <option value="">Select Program</option>
          <option value="AP">AP</option>
          <option value="IB">IB</option>
          <option value="CLEP">CLEP</option>
          <option value="Other">Other</option>
        </select>
        <select id="exam-name" disabled>
          <option value="">Select Exam</option>
        </select>
        <input id="exam-score" type="number" min="1" max="7" placeholder="Score" disabled />
        <button id="add-exam" class="primary" disabled>Add Exam Credit</button>
      </div>
      <div id="exam-credits"></div>

      <div class="divider"></div>

      <h3 class="section-sub">Other waivers</h3>
      <label style="display:block; margin-bottom:8px">
        <input type="checkbox" id="lote-waiver" />
        I completed 2 years of the same language in high school (LOTE).
      </label>
      <label style="display:block; margin-bottom:8px">
        <input type="checkbox" id="hs-chemistry" />
        I completed 1 year of high school Chemistry.
      </label>
      <label style="display:block; margin-bottom:8px">
        <input type="checkbox" id="hs-intermediate-algebra" />
        I completed Intermediate Algebra (or equivalent).
      </label>
      <p class="hint small">
        LOTE waives IGETC Area 6A. Chemistry and Algebra affect course prerequisites.
      </p>
    </section>

    <section class="panel">
      <h2>3) Catalog Rights</h2>
      <div class="rights">
        <div>
          <label><input type="checkbox" id="rights-auto" checked> Auto-calc from terms</label>
        </div>
        <div id="rights-readout"></div>
        <details class="mt">
          <summary>Manual override (advanced)</summary>
          <div id="rights-manual"></div>
        </details>
      </div>
      <p class="hint">
        Rules: rights include each academic year (YYYY-YYYY) in which you enrolled continuously (no skipped academic year).
        For AA/AS the Local GE in eligible years is allowed. For AA-T/AS-T, eligible GE is CSU Breadth or IGETC in 2023‚Äì2024/2024‚Äì2025, and Cal-GETC starting 2025‚Äì2026. You can override below if needed.
      </p>
    </section>

    <section class="panel">
      <h2>4) GE Progress (optimized assignment)</h2>
      <div id="ge-tabs"></div>
      <div id="ge-content"></div>
    </section>

    <section class="panel">
      <h2>5) Closest Programs</h2>
      <div class="filters">
        <label>Program Type:
          <select id="prog-type-filter">
            <option value="">All</option>
            <option value="Associate in Arts">AA (Associate in Arts)</option>
            <option value="Associate in Science">AS (Associate in Science)</option>
            <option value="Associate in Arts for Transfer">AA-T (Transfer)</option>
            <option value="Associate in Science for Trans">AS-T (Transfer)</option>
            <option value="__cert__">Certificates</option>
          </select>
        </label>
        <label>Department:
          <input id="prog-dept-filter" placeholder="e.g., Business Education" />
        </label>
        <label>Sort by:
          <select id="prog-sort">
            <option value="score">Best % match</option>
            <option value="remaining_program">Fewest classes left (program)</option>
            <option value="alphabetical">Alphabetical (A-Z)</option>
          </select>
        </label>
        <label><input type="checkbox" id="include-planned" checked> Count IP/Planned toward "closeness" preview</label>
        <label><input type="checkbox" id="ignore-ge"> Ignore GE when ranking</label>
      </div>
      <div id="program-results" class="programs"></div>
    </section>
  </main>

  <template id="tpl-term">
    <div class="term">
      <div class="term-head">
        <div class="term-title"></div>
        <div class="term-actions">
          <button class="ghost small add-row">Add Course</button>
          <button class="ghost small remove-term">Remove Term</button>
        </div>
      </div>
      <table class="term-table">
        <thead>
          <tr>
            <th style="width: 240px;">Course</th>
            <th style="width: 80px;">Units</th>
            <th style="width: 140px;">Grade</th>
            <th>Title</th>
            <th style="width: 40px;"></th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </template>

  <template id="tpl-row">
    <tr>
      <td>
        <div class="code-input">
          <input class="course-code" list="course-codes" placeholder="e.g. ENGL 2, STAT C1000" />
        </div>
      </td>
      <td class="cell-units">‚Äî</td>
      <td>
        <select class="grade">
          <option value="IP">IP</option>
          <option value="PL">PL</option>
          <option value="A">A</option>
          <option value="B">B</option>
          <option value="C">C</option>
          <option value="D">D</option>
          <option value="F">F</option>
          <option value="P">P</option>
          <option value="NP">NP</option>
          <option value="W">W</option>
        </select>
      </td>
      <td class="cell-title">‚Äî</td>
      <td><button class="ghost small remove-row">‚úï</button></td>
    </tr>
  </template>

  <datalist id="course-codes"></datalist>
  <script type="module" src="app.js"></script>
</body>
</html>
